<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-16">
    <meta name="viewport" content="initial-scale=1.0">
    <title>TTRPG Character Sheet Builder - Professional IDE</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="ide-container">
        <div class="title-bar">
            <span class="logo">ğŸ®</span>
            <span>TTRPG Character Sheet Builder - Professional IDE</span>
        </div>

        <div class="menu-bar">
            <div class="menu-item" data-menu="file" tabindex="0" aria-label="File menu">File</div>
            <div class="menu-item" data-menu="edit" tabindex="0" aria-label="Edit menu">Edit</div>
            <div class="menu-item" data-menu="view" tabindex="0" aria-label="View menu">View</div>
            <div class="menu-item" data-menu="help" tabindex="0" aria-label="Help menu">Help</div>
        </div>

        <div class="main-layout">
            <div class="activity-bar">
                <div class="activity-icon active" data-panel="explorer" title="Explorer" tabindex="0">ğŸ“</div>
                <div class="activity-icon" data-panel="components" title="Components" tabindex="0">ğŸ§©</div>
                <div class="activity-icon" data-panel="properties" title="Properties" tabindex="0">âš™ï¸</div>
                <div class="activity-icon" data-panel="data" title="Data" tabindex="0">ğŸ“Š</div>
            </div>

            <div class="sidebar" id="sidebar">
                <div class="sidebar-header" id="sidebar-title">EXPLORER</div>
                <div class="sidebar-content" id="sidebar-content">
                    <div class="panel-content" id="explorer-panel">
                        <div class="component-section">
                            <div class="component-section-title">Sheet Structure</div>
                            <div id="sheet-tree">
                                <div style="color: #858585; font-size: 11px; text-align: center; padding: 20px;">
                                    No components added yet
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel-content" id="components-panel" style="display: none;">
                        <div class="component-section">
                            <div class="component-section-title">Layout</div>
                            <div class="component-item" draggable="true" data-type="row">
                                <span class="icon">ğŸ“‹</span>Row Container
                            </div>
                            <div class="component-item" draggable="true" data-type="column">
                                <span class="icon">ğŸ“Š</span>Column Container
                            </div>
                        </div>

                        <div class="component-section">
                            <div class="component-section-title">Form Elements</div>
                            <div class="component-item" draggable="true" data-type="text-input">
                                <span class="icon">ğŸ“</span>Text Input
                            </div>
                            <div class="component-item" draggable="true" data-type="number-input">
                                <span class="icon">ğŸ”¢</span>Number Input
                            </div>
                            <div class="component-item" draggable="true" data-type="textarea">
                                <span class="icon">ğŸ“„</span>Text Area
                            </div>
                            <div class="component-item" draggable="true" data-type="select">
                                <span class="icon">ğŸ“‹</span>Dropdown
                            </div>
                            <div class="component-item" draggable="true" data-type="checkbox">
                                <span class="icon">â˜‘ï¸</span>Checkbox
                            </div>
                        </div>

                        <div class="component-section">
                            <div class="component-section-title">Display</div>
                            <div class="component-item" draggable="true" data-type="label">
                                <span class="icon">ğŸ·ï¸</span>Label
                            </div>
                            <div class="component-item" draggable="true" data-type="calculated">
                                <span class="icon">ğŸ§®</span>Calculated Field
                            </div>
                            <div class="component-item" draggable="true" data-type="progress-bar">
                                <span class="icon">ğŸ“Š</span>Progress Bar
                            </div>
                        </div>

                        <div class="component-section">
                            <div class="component-section-title">Interactive</div>
                            <div class="component-item" draggable="true" data-type="dice-button">
                                <span class="icon">ğŸ²</span>Dice Roll Button
                            </div>
                            <div class="component-item" draggable="true" data-type="reference-button">
                                <span class="icon">ğŸ“š</span>Reference List Button
                            </div>
                            <div class="component-item" draggable="true" data-type="info-button">
                                <span class="icon">â„¹ï¸</span>Info Box Button
                            </div>
                        </div>
                    </div>

                    <div class="panel-content" id="properties-panel" style="display: none;">
                        <div id="properties-content">
                            <div style="color: #858585; font-size: 11px; text-align: center; padding: 20px;">
                                Select an item to edit its properties
                            </div>
                        </div>
                    </div>

                    <div class="panel-content" id="data-panel" style="display: none;">
                        <div class="component-section">
                            <div class="component-section-title">Sheet Data</div>
                            <button class="btn" data-action="show-data-editor" style="width: 100%; margin-bottom: 10px;">
                                ğŸ“Š Edit JSON Data
                            </button>
                            <button class="btn btn-secondary" data-action="export-sheet" style="width: 100%; margin-bottom: 10px;">
                                ğŸ’¾ Export Sheet
                            </button>
                            <button class="btn btn-secondary" data-action="import-sheet" style="width: 100%;">
                                ğŸ“ Import Sheet
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="editor-area">
                <div class="tab-bar">
                    <div class="editor-tab active">
                        <span>ğŸ“‹ Character Sheet</span>
                        <span class="close-btn" data-action="close-tab" tabindex="0" aria-label="Close tab">Ã—</span>
                    </div>
                </div>

                <div class="canvas-container">
                    <div class="canvas" id="canvas">
                        <div class="canvas-placeholder">
                            <h3>Start Building Your Character Sheet</h3>
                            <p>Drag components from the sidebar to begin</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <div class="status-left">
                <span id="component-count">Components: 0</span>
                <span id="sheet-status">Ready</span>
            </div>
            <div class="status-right">
                <span class="status-btn" data-action="preview" tabindex="0" aria-label="Preview">ğŸ‘ï¸ Preview</span>
                <span class="status-btn" data-action="css" tabindex="0" aria-label="CSS">ğŸ¨ CSS</span>
                <span class="status-btn" data-action="settings" tabindex="0" aria-label="Settings">âš™ï¸ Settings</span>
            </div>
        </div>
    </div>

    <!-- Modals: all close buttons use data-close attribute -->
    <div class="modal" id="dice-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ² Dice Roll Result</h3>
                <button class="modal-close" data-close="dice-modal" tabindex="0" aria-label="Close dice modal">Ã—</button>
            </div>
            <div class="dice-result" id="dice-result"></div>
        </div>
    </div>

    <div class="modal" id="reference-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“š Reference List</h3>
                <button class="modal-close" data-close="reference-modal" tabindex="0" aria-label="Close reference modal">Ã—</button>
            </div>
            <div class="reference-list" id="reference-list"></div>
        </div>
    </div>

    <div class="modal" id="info-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="info-title">â„¹ï¸ Information</h3>
                <button class="modal-close" data-close="info-modal" tabindex="0" aria-label="Close info modal">Ã—</button>
            </div>
            <div id="info-content"></div>
        </div>
    </div>

    <div class="modal" id="preview-modal">
        <div class="modal-content" style="max-width: 95%; max-height: 95%;">
            <div class="modal-header">
                <h3>ğŸ‘ï¸ Sheet Preview</h3>
                <button class="modal-close" data-close="preview-modal" tabindex="0" aria-label="Close preview modal">Ã—</button>
            </div>
            <div id="preview-content" style="background: white; color: black; padding: 20px; border-radius: 6px;"></div>
        </div>
    </div>

    <div class="modal" id="data-modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>ğŸ“Š Sheet Data Editor</h3>
                <button class="modal-close" data-close="data-modal" tabindex="0" aria-label="Close data modal">Ã—</button>
            </div>
            <textarea class="code-editor" id="data-editor" placeholder="Edit your sheet's JSON data here..."></textarea>
            <div style="margin-top: 15px; display: flex; gap: 10px;">
                <button class="btn" data-action="save-sheet-data">ğŸ’¾ Save Changes</button>
                <button class="btn btn-secondary" data-action="format-json">âœ¨ Format JSON</button>
                <button class="btn btn-secondary" data-action="validate-json">âœ“ Validate</button>
            </div>
        </div>
    </div>

    <div class="modal" id="css-modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>ğŸ¨ Global CSS Styles</h3>
                <button class="modal-close" data-close="css-modal" tabindex="0" aria-label="Close CSS modal">Ã—</button>
            </div>
            <textarea class="code-editor" id="css-editor" placeholder="/* Add your custom CSS styles here */"></textarea>
            <div style="margin-top: 15px; display: flex; gap: 10px;">
                <button class="btn" data-action="apply-global-css">ğŸ¨ Apply Styles</button>
                <button class="btn btn-secondary" data-action="reset-css">ğŸ”„ Reset</button>
            </div>
        </div>
    </div>

    <div class="modal" id="settings-modal">
        <div class="modal-content" style="max-width:700px;">
            <div class="modal-header">
                <h3>âš™ï¸ Settings</h3>
                <button class="modal-close" data-close="settings-modal" tabindex="0" aria-label="Close settings modal">Ã—</button>
            </div>
            <div>
                <label style="font-weight: bold;">Fonts (CSS font-family):</label><br>
                <input id="settings-fonts" type="text" style="width: 100%; margin-bottom: 15px;">
            </div>
            <div>
                <label style="font-weight: bold;">Component Labels:</label>
                <table style="width:100%; margin-top:4px;">
                    <thead>
                        <tr>
                            <th style="text-align:left;">Component Type</th>
                            <th style="text-align:left;">Label</th>
                        </tr>
                    </thead>
                    <tbody id="settings-labels-tbody"></tbody>
                </table>
            </div>
            <div style="margin-top:15px; text-align:right;">
                <button class="btn" data-action="save-settings">ğŸ’¾ Save</button>
            </div>
        </div>
    </div>

    <script src="./main.js"></script>
</body>
</html>
